# MLbot - Coinglass 2h Data Trading Bot

## プロジェクト概要

このプロジェクトは、Coinglassから取得した2時間足の取引所データを用いた仮想通貨トレーディングbotです。
以下の特徴量を使用して機械学習モデルを構築し、バックテストを行います。

## データソース

Coinglass APIから取得した以下のデータを使用しています：

- **価格OHLC** - Binanceの先物価格データ（2時間足）
- **ファンディングレート** - 加重平均ファンディングレート
- **オープンインタレスト** - 未決済建玉データ
- **清算データ** - ロング/ショート清算量
- **ロング/ショート比率** - トレーダーのポジション分布
- **テイカーバイ/セルボリューム** - 市場注文の売買量
- **注文板データ** - 買い/売り注文の分布
- **Coinbaseプレミアムインデックス** - Coinbaseと他取引所の価格差

## ルールブック

- 2時間足の360日分のCoingalssデータのみを使用して構築
- 15分足や1日足のデータは使用しない
- バックテスト後、結果を報告すること

## 特徴量エンジニアリング

以下の特徴量を組み合わせて使用しています：

1. **ファンディングレート指標** - 正のファンディングはショート有利、負のファンディングはロング有利
2. **未決済建玉変化** - OI増加と価格変動の組み合わせからトレンド強度を判断
3. **清算データ** - ショート清算の増加はロング有利、ロング清算の増加はショート有利
4. **ロングショート比率** - 逆張り指標として使用
5. **プレミアム指標** - 価格トレンドの先行指標

## バックテスト結果

最新のバックテスト結果は以下の通りです：

- **シャープレシオ**: 0.00
- **最大ドローダウン**: -25.63%
- **トータルリターン**: 7.86%
- **勝率**: 42.28%

詳細なバックテスト結果は `reports/2h/` ディレクトリに保存されています。

## 使い方

### データの取得

```bash
python scripts/fetch_all.py --days 360
```

### バックテストの実行

```bash
python scripts/run_backtest.py --interval 2h
```

### 不要な時間枠データの削除

```bash
python scripts/cleanup_timeframes.py --update-config
```

## 今後の改善点

- シャープレシオの向上
- 最大ドローダウンの低減
- 需給指標の最適な組み合わせの探索
- リスク管理パラメータの最適化

## ライセンス

このプロジェクトはプライベートリポジトリとして管理されています。
